@page "/charts/population"
@inject IPopulationByYearDataGenerator PopulationByYearDataGenerator

<PageTitle>@PopulationByYearData.Title - @Application.Name</PageTitle>

<ChartHeading Title="@PopulationByYearData.Title"
              Description="@PopulationByYearData.Description" />

<Chart>
    <ApexChart TItem="PopulationByYearDataPoint"
               Title="@PopulationByYearData.YAxisTitle"
               Options="ChartOptions"
               Height="@("100%")"
               Width="@("100%")">

        <ApexPointTooltip>
            <PopulationByYearTooltip DataPoint="@context.DataPoint.Items.First()" />
        </ApexPointTooltip>

        <ChildContent>
            <ApexPointSeries TItem="PopulationByYearDataPoint"
                             Items="DataSource.DataPoints"
                             Name="@PopulationByYearData.SeriesTitles[0]"
                             SeriesType="SeriesType.Area"
                             XValue="dataPoint => dataPoint.Year"
                             YValue="dataPoint => dataPoint.Population" />
        </ChildContent>
    </ApexChart>   
</Chart>

@code {
    private ApexChartOptions<PopulationByYearDataPoint> ChartOptions { get; } = PopulationByYearChartOptions.Defaults;

    private PopulationByYearData DataSource { get; set; } = default!;

    protected override void OnInitialized() => DataSource = PopulationByYearDataGenerator.Generate();
}
